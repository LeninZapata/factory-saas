// ==========================================
// DOCUMENTACIÃ“N DE USO
// ==========================================

/*
SISTEMA DE TRIGGERS INTERNO DEL FRAMEWORK

El sistema de triggers permite que mÃ³dulos del framework inyecten contenido
o ejecuten acciones en otros mÃ³dulos sin acoplamiento directo.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PASO 1: REGISTRAR UN TRIGGER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

En el mÃ³dulo que QUIERE INYECTAR contenido (ej: auth.js, notifications.js):

Al FINAL del archivo, despuÃ©s de registrar en ogFramework:

  if (typeof window.ogTrigger !== 'undefined') {
    ogTrigger.register('sidebar:footer', 'ogAuth', 'injectLogoutButton');
    //                  â†‘ target        â†‘ clase   â†‘ mÃ©todo
  }

Target format: 'moduloReceptor:zona'
  - 'sidebar:footer' â†’ Inyectar en footer del sidebar
  - 'sidebar:header' â†’ Inyectar en header del sidebar
  - 'layout:toolbar' â†’ Inyectar en toolbar del layout
  - etc.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PASO 2: CREAR EL MÃ‰TODO QUE SE EJECUTARÃ
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

En el mismo mÃ³dulo (ej: auth.js):

  static injectLogoutButton(target) {
    const config = window.ogFramework?.activeConfig || {};
    
    // Validar si debe ejecutarse
    if (!config.auth?.enabled) {
      return;
    }

    // Generar el HTML
    const html = `<button>Logout</button>`;

    // Inyectarlo usando el mÃ©todo inject() del mÃ³dulo receptor
    const { sidebar } = this.getModules();
    if (sidebar?.inject) {
      const zone = target.split(':')[1]; // 'footer'
      sidebar.inject(zone, html);
      
      // Bindear eventos si es necesario
      setTimeout(() => {
        const btn = document.getElementById('btn-logout');
        if (btn) {
          btn.addEventListener('click', () => this.logout());
        }
      }, 0);
    }
  }

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PASO 3: EJECUTAR TRIGGERS EN EL MÃ“DULO RECEPTOR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

En el mÃ³dulo que RECIBE contenido (ej: sidebar.js):

Ejecutar triggers DESPUÃ‰S de que el DOM estÃ© listo:

  static renderMenu() {
    const sidebar = document.getElementById('sidebar');
    if (!sidebar) return;

    // Renderizar estructura
    const header = this.generateHeader();
    const menuHTML = this.generateMenuHtml(this.menuData.menu);
    const footer = this.generateFooter();
    sidebar.innerHTML = header + menuHTML + footer;

    // Bindear eventos propios
    this.bindMenuEvents();

    // âœ… EJECUTAR TRIGGERS - DOM ya estÃ¡ listo
    if (window.ogTrigger) {
      ogTrigger.execute('sidebar'); // Ejecuta todos los 'sidebar:*'
    }
  }

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PASO 4: AGREGAR MÃ‰TODO inject() EN EL MÃ“DULO RECEPTOR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

En el mÃ³dulo receptor (ej: sidebar.js):

  static inject(zone, html) {
    const validZones = ['header', 'footer', 'content'];
    
    if (!validZones.includes(zone)) {
      ogLogger?.error('core:sidebar', `Zona invÃ¡lida: ${zone}`);
      return false;
    }

    const container = document.querySelector(`.sidebar-${zone}`);
    
    if (!container) {
      ogLogger?.error('core:sidebar', `Contenedor no encontrado: .sidebar-${zone}`);
      return false;
    }

    container.innerHTML += html;
    ogLogger?.info('core:sidebar', `âœ… Contenido inyectado en sidebar-${zone}`);
    return true;
  }

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

EJEMPLOS COMPLETOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

EJEMPLO 1: Auth inyecta logout en sidebar footer
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// auth.js (al final)
ogTrigger.register('sidebar:footer', 'ogAuth', 'injectLogoutButton');

// auth.js (mÃ©todo)
static injectLogoutButton(target) {
  if (!config.auth?.enabled) return;
  const html = `<button id="btn-logout">Logout</button>`;
  ogSidebar.inject('footer', html);
}

// sidebar.js (en renderMenu, despuÃ©s de innerHTML)
ogTrigger.execute('sidebar');


EJEMPLO 2: Notifications inyecta campana en sidebar header
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// notifications.js (al final)
ogTrigger.register('sidebar:header', 'ogNotifications', 'injectBell');

// notifications.js (mÃ©todo)
static injectBell(target) {
  const html = `<div class="notification-bell">ğŸ””</div>`;
  ogSidebar.inject('header', html);
}

// sidebar.js (ya ejecuta todos los triggers con 'sidebar')
ogTrigger.execute('sidebar'); // â† Ejecuta auth Y notifications


EJEMPLO 3: Widget inyecta botÃ³n en layout toolbar
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// widget.js (al final)
ogTrigger.register('layout:toolbar', 'ogWidget', 'injectQuickAction');

// widget.js (mÃ©todo)
static injectQuickAction(target) {
  const html = `<button>Quick Action</button>`;
  ogLayout.inject('toolbar', html);
}

// layout.js (despuÃ©s de renderizar toolbar)
ogTrigger.execute('layout');

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PATRONES Y BUENAS PRÃCTICAS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. NAMING DE TARGETS
   Format: 'moduloReceptor:zona'
   âœ… Correcto: 'sidebar:footer', 'layout:toolbar'
   âŒ Incorrecto: 'footer', 'sidebar_footer'

2. VALIDACIÃ“N EN EL MÃ‰TODO
   Siempre validar condiciones antes de inyectar:
   if (!config.feature?.enabled) return;

3. EVENTOS ASÃNCRONOS
   Usar setTimeout(() => {...}, 0) para bindear eventos despuÃ©s de inyectar

4. EJECUCIÃ“N POR MÃ“DULO
   Cada mÃ³dulo ejecuta solo sus propios triggers:
   ogTrigger.execute('sidebar') // Solo 'sidebar:*'
   ogTrigger.execute('layout')  // Solo 'layout:*'

5. ORDEN DE CARGA
   Los triggers se registran cuando el script carga.
   Se ejecutan cuando el mÃ³dulo receptor estÃ¡ listo.
   No importa el orden de carga de scripts.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

DEBUGGING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Ver todos los triggers registrados
ogTrigger.list();

// Ver triggers de un mÃ³dulo especÃ­fico
ogTrigger.list('sidebar');

// Resetear (Ãºtil para testing)
ogTrigger.reset();

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

CHECKLIST PARA AGREGAR UN NUEVO TRIGGER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

En el mÃ³dulo que INYECTA (ej: auth.js):
â–¡ Registrar trigger al final del archivo
â–¡ Crear mÃ©todo estÃ¡tico que recibe (target)
â–¡ Validar condiciones antes de inyectar
â–¡ Usar mÃ³dulo.inject(zone, html)
â–¡ Bindear eventos con setTimeout si es necesario

En el mÃ³dulo que RECIBE (ej: sidebar.js):
â–¡ Tener mÃ©todo inject(zone, html)
â–¡ Tener estructura DOM con clases .modulo-zona
â–¡ Ejecutar ogTrigger.execute('modulo') despuÃ©s de renderizar

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
*/