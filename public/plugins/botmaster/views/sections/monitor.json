{
  "id": "bot-monitor",
  "title": "i18n:botmaster:monitor.title",
  "description": "i18n:botmaster:monitor.description",
  "content": [
    {
      "type": "html",
      "content": "<div style='display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;'><div><h2 style='margin:0;font-size:1.875rem;color:#1f2937;'>üì° Monitor en Vivo</h2><p style='margin:0.5rem 0 0 0;color:#6b7280;'>Visualiza la ejecuci√≥n de bots en tiempo real</p></div><div style='display:flex;gap:0.5rem;'><button onclick='botmaster.refreshMonitor()' style='background:#3b82f6;color:white;border:none;padding:0.75rem 1.5rem;border-radius:8px;cursor:pointer;font-weight:600;display:flex;align-items:center;gap:0.5rem;' onmouseover='this.style.background=\"#2563eb\"' onmouseout='this.style.background=\"#3b82f6\"'><span>üîÑ</span><span>Actualizar</span></button></div></div>"
    },
    {
      "type": "html",
      "content": "<div style='background:linear-gradient(135deg,#10b981 0%,#059669 100%);color:white;padding:1rem 1.5rem;border-radius:8px;margin-bottom:1.5rem;display:flex;align-items:center;gap:1rem;'><div style='font-size:2rem;'>‚ö°</div><div style='flex:1;'><div style='font-size:0.875rem;opacity:0.9;'>Bots en Ejecuci√≥n</div><div style='font-size:1.5rem;font-weight:700;'>5 activos</div></div><div style='background:rgba(255,255,255,0.2);width:1px;height:40px;'></div><div style='flex:1;'><div style='font-size:0.875rem;opacity:0.9;'>Tareas Completadas Hoy</div><div style='font-size:1.5rem;font-weight:700;'>342</div></div><div style='background:rgba(255,255,255,0.2);width:1px;height:40px;'></div><div style='flex:1;'><div style='font-size:0.875rem;opacity:0.9;'>Tasa de √âxito</div><div style='font-size:1.5rem;font-weight:700;'>98.2%</div></div></div>"
    },
    {
      "type": "component",
      "component": "datatable",
      "config": {
        "source": "mock",
        "mockData": [
          {
            "id": 1,
            "bot_name": "bot_instagram_001",
            "current_task": "Agregar Amigos",
            "progress": 75,
            "status": "running",
            "last_activity": "Hace 2 seg"
          },
          {
            "id": 2,
            "bot_name": "bot_facebook_025",
            "current_task": "Publicar Contenido",
            "progress": 45,
            "status": "running",
            "last_activity": "Hace 5 seg"
          },
          {
            "id": 3,
            "bot_name": "bot_twitter_012",
            "current_task": "Seguir Usuarios",
            "progress": 90,
            "status": "running",
            "last_activity": "Hace 1 seg"
          },
          {
            "id": 4,
            "bot_name": "bot_linkedin_008",
            "current_task": "Scraping Perfiles",
            "progress": 30,
            "status": "running",
            "last_activity": "Hace 3 seg"
          },
          {
            "id": 5,
            "bot_name": "bot_tiktok_033",
            "current_task": "Likes Autom√°ticos",
            "progress": 100,
            "status": "completed",
            "last_activity": "Hace 10 seg"
          },
          {
            "id": 6,
            "bot_name": "bot_youtube_019",
            "current_task": "Comentar Videos",
            "progress": 60,
            "status": "paused",
            "last_activity": "Hace 2 min"
          }
        ],
        "columns": [
          {
            "id": {
              "name": "ID",
              "width": "60px",
              "align": "center"
            }
          },
          {
            "bot_name": {
              "name": "Bot",
              "sortable": true,
              "width": "180px",
              "render": "function(value) { return '<span style=\"font-family:monospace;background:#f3f4f6;padding:0.25rem 0.5rem;border-radius:4px;font-weight:600;\">' + value + '</span>'; }"
            }
          },
          {
            "current_task": {
              "name": "Tarea Actual",
              "width": "200px",
              "render": "function(value) { return '<span style=\"color:#1f2937;font-weight:500;\">' + value + '</span>'; }"
            }
          },
          {
            "progress": {
              "name": "Progreso",
              "width": "200px",
              "render": "function(value) { const color = value < 30 ? '#ef4444' : value < 70 ? '#f59e0b' : '#10b981'; return '<div style=\"display:flex;align-items:center;gap:0.5rem;\"><div style=\"flex:1;background:#e5e7eb;height:8px;border-radius:4px;overflow:hidden;\"><div style=\"background:' + color + ';height:100%;width:' + value + '%;transition:width 0.3s;\"></div></div><span style=\"font-weight:600;font-size:0.875rem;min-width:45px;\">' + value + '%</span></div>'; }"
            }
          },
          {
            "status": {
              "name": "Estado",
              "width": "130px",
              "align": "center",
              "render": "function(value) { const badges = { running: '<span style=\"background:#d1fae5;color:#065f46;padding:0.25rem 0.75rem;border-radius:12px;font-size:0.875rem;font-weight:600;display:inline-flex;align-items:center;gap:0.25rem;\"><span style=\"animation:pulse 2s infinite;\">üü¢</span>Ejecutando</span>', completed: '<span style=\"background:#dbeafe;color:#1e40af;padding:0.25rem 0.75rem;border-radius:12px;font-size:0.875rem;font-weight:600;\">‚úÖ Completado</span>', paused: '<span style=\"background:#fef3c7;color:#92400e;padding:0.25rem 0.75rem;border-radius:12px;font-size:0.875rem;font-weight:600;\">‚è∏Ô∏è Pausado</span>', error: '<span style=\"background:#fee2e2;color:#991b1b;padding:0.25rem 0.75rem;border-radius:12px;font-size:0.875rem;font-weight:600;\">‚ùå Error</span>' }; return badges[value]; }"
            }
          },
          {
            "last_activity": {
              "name": "√öltima Actividad",
              "width": "140px",
              "render": "function(value) { return '<span style=\"font-size:0.875rem;color:#6b7280;\">' + value + '</span>'; }"
            }
          }
        ],
        "actions": {
          "view": {
            "name": "üëÅÔ∏è Ver Detalles",
            "onclick": "modal.open('botmaster|views/bot-details', {id: {id}})"
          },
          "pause": {
            "name": "‚è∏Ô∏è Pausar",
            "onclick": "botmaster.pauseBot({id})"
          },
          "stop": {
            "name": "‚èπÔ∏è Detener",
            "onclick": "botmaster.stopBot({id})",
            "confirm": "¬øDetener la ejecuci√≥n de este bot?"
          }
        },
        "pagination": {
          "enabled": true,
          "perPage": 20
        },
        "search": {
          "enabled": true,
          "placeholder": "Buscar bots en ejecuci√≥n..."
        },
        "filters": [
          {
            "field": "status",
            "label": "Estado",
            "type": "select",
            "options": [
              {"value": "", "label": "Todos"},
              {"value": "running", "label": "üü¢ Ejecutando"},
              {"value": "completed", "label": "‚úÖ Completados"},
              {"value": "paused", "label": "‚è∏Ô∏è Pausados"},
              {"value": "error", "label": "‚ùå Error"}
            ]
          }
        ],
        "toolbar": [
          {
            "name": "pause_all",
            "label": "‚è∏Ô∏è Pausar Todos",
            "onclick": "botmaster.pauseAllBots()",
            "confirm": "¬øPausar todos los bots en ejecuci√≥n?"
          },
          {
            "name": "stop_all",
            "label": "‚èπÔ∏è Detener Todos",
            "onclick": "botmaster.stopAllBots()",
            "confirm": "¬øDetener todos los bots en ejecuci√≥n?"
          },
          {
            "name": "export_log",
            "label": "üì• Exportar Log",
            "onclick": "botmaster.exportMonitorLog()"
          }
        ],
        "autoRefresh": {
          "enabled": true,
          "interval": 5000
        }
      }
    },
    {
      "type": "html",
      "content": "<style>@keyframes pulse{0%,100%{opacity:1}50%{opacity:0.5}}</style>"
    }
  ]
}
