{
  "id": "family-form",
  "title": "ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Crear Familia de Bots",
  "description": "Configura un grupo de bots con caracterÃ­sticas compartidas",
  "fields": [
    {
      "type": "grouper",
      "mode": "tabs",
      "groups": [
        {
          "title": "ğŸ“‹ InformaciÃ³n",
          "fields": [
            {
              "name": "family_name",
              "label": "Nombre de la Familia",
              "type": "text",
              "required": true,
              "placeholder": "Ej: Familia_Facebook_USA"
            },
            {
              "type": "group",
              "columns": 2,
              "gap": "normal",
              "fields": [
                {
                  "name": "bot_count",
                  "label": "Cantidad de Bots",
                  "type": "number",
                  "required": true,
                  "min": 1,
                  "max": 100,
                  "value": 10,
                  "placeholder": "1-100"
                },
                {
                  "name": "proxy_location",
                  "label": "UbicaciÃ³n Proxy",
                  "type": "select",
                  "required": true,
                  "options": [
                    {"value": "US", "label": "ğŸ‡ºğŸ‡¸ Estados Unidos"},
                    {"value": "GB", "label": "ğŸ‡¬ğŸ‡§ Reino Unido"},
                    {"value": "CA", "label": "ğŸ‡¨ğŸ‡¦ CanadÃ¡"},
                    {"value": "AU", "label": "ğŸ‡¦ğŸ‡º Australia"},
                    {"value": "DE", "label": "ğŸ‡©ğŸ‡ª Alemania"},
                    {"value": "FR", "label": "ğŸ‡«ğŸ‡· Francia"},
                    {"value": "ES", "label": "ğŸ‡ªğŸ‡¸ EspaÃ±a"},
                    {"value": "MX", "label": "ğŸ‡²ğŸ‡½ MÃ©xico"},
                    {"value": "AR", "label": "ğŸ‡¦ğŸ‡· Argentina"},
                    {"value": "BR", "label": "ğŸ‡§ğŸ‡· Brasil"},
                    {"value": "CO", "label": "ğŸ‡¨ğŸ‡´ Colombia"},
                    {"value": "EC", "label": "ğŸ‡ªğŸ‡¨ Ecuador"}
                  ]
                }
              ]
            },
            {
              "name": "description",
              "label": "DescripciÃ³n",
              "type": "textarea",
              "placeholder": "Describe el propÃ³sito de esta familia...",
              "rows": 3
            }
          ]
        },
        {
          "title": "ğŸ“± Dispositivos",
          "fields": [
            {
              "type": "html",
              "content": "<div style='background:#fef3c7;padding:1rem;border-radius:8px;margin-bottom:1rem;border-left:4px solid #f59e0b;'><strong>âš ï¸ Importante:</strong> La suma de todos los porcentajes debe ser 100%</div>"
            },
            {
              "type": "group",
              "columns": 4,
              "gap": "normal",
              "fields": [
                {
                  "name": "device_iphone",
                  "label": "ğŸ“± iPhone (%)",
                  "type": "number",
                  "min": 0,
                  "max": 100,
                  "value": 45,
                  "step": 1
                },
                {
                  "name": "device_android",
                  "label": "ğŸ¤– Android (%)",
                  "type": "number",
                  "min": 0,
                  "max": 100,
                  "value": 30,
                  "step": 1
                },
                {
                  "name": "device_windows",
                  "label": "ğŸªŸ Windows (%)",
                  "type": "number",
                  "min": 0,
                  "max": 100,
                  "value": 15,
                  "step": 1
                },
                {
                  "name": "device_mac",
                  "label": "ğŸ Mac (%)",
                  "type": "number",
                  "min": 0,
                  "max": 100,
                  "value": 10,
                  "step": 1
                }
              ]
            },
            {
              "type": "html",
              "content": "<div id='device-sum-display' style='background:#e0f2fe;padding:0.75rem;border-radius:6px;margin-top:0.5rem;text-align:center;font-weight:600;'></div><script>function updateDeviceSum(){const form=document.getElementById('family-form');if(!form)return;const iphone=parseInt(form.querySelector('[name=\"device_iphone\"]')?.value||0);const android=parseInt(form.querySelector('[name=\"device_android\"]')?.value||0);const windows=parseInt(form.querySelector('[name=\"device_windows\"]')?.value||0);const mac=parseInt(form.querySelector('[name=\"device_mac\"]')?.value||0);const sum=iphone+android+windows+mac;const display=document.getElementById('device-sum-display');if(display){display.innerHTML=sum===100?'âœ… Total: '+sum+'%':'âš ï¸ Total: '+sum+'% (debe ser 100%)';display.style.background=sum===100?'#d1fae5':'#fee2e2';display.style.color=sum===100?'#065f46':'#991b1b';}}document.addEventListener('input',(e)=>{if(e.target.name?.startsWith('device_'))updateDeviceSum();});setTimeout(updateDeviceSum,500);</script>"
            }
          ]
        },
        {
          "title": "ğŸ“‹ Tareas Asignadas",
          "fields": [
            {
              "type": "html",
              "content": "<div style='background:#e0f2fe;padding:1rem;border-radius:8px;margin-bottom:1rem;border-left:4px solid #0284c7;'><strong>ğŸ’¡ Tareas:</strong> Asigna plantillas que se ejecutarÃ¡n automÃ¡ticamente</div>"
            },
            {
              "name": "assigned_tasks",
              "label": "Tareas",
              "type": "repeatable",
              "buttonPosition": "middle",
              "addText": "â• Asignar Tarea",
              "removeText": "ğŸ—‘ï¸",
              "fields": [
                {
                  "type": "group",
                  "columns": 3,
                  "gap": "normal",
                  "fields": [
                    {
                      "name": "template",
                      "label": "Plantilla",
                      "type": "select",
                      "required": true,
                      "options": [
                        {"value": "task1", "label": "Agregar Amigos Facebook"},
                        {"value": "task2", "label": "Publicar Instagram"},
                        {"value": "task3", "label": "Seguir Twitter"},
                        {"value": "task4", "label": "Scraping Productos"}
                      ]
                    },
                    {
                      "name": "frequency",
                      "label": "Frecuencia",
                      "type": "select",
                      "required": true,
                      "options": [
                        {"value": "once", "label": "Una vez"},
                        {"value": "hourly", "label": "Cada hora"},
                        {"value": "daily", "label": "Diaria"},
                        {"value": "weekly", "label": "Semanal"}
                      ]
                    },
                    {
                      "name": "max_executions",
                      "label": "Ejecuciones MÃ¡x.",
                      "type": "number",
                      "min": 1,
                      "placeholder": "Ilimitado"
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "title": "âš™ï¸ ConfiguraciÃ³n Avanzada",
          "fields": [
            {
              "type": "group",
              "columns": 2,
              "gap": "normal",
              "fields": [
                {
                  "name": "rotation_mode",
                  "label": "Modo de RotaciÃ³n",
                  "type": "select",
                  "options": [
                    {"value": "sequential", "label": "ğŸ“Š Secuencial"},
                    {"value": "random", "label": "ğŸ² Aleatorio"},
                    {"value": "round_robin", "label": "ğŸ”„ Round Robin"}
                  ]
                },
                {
                  "name": "execution_delay",
                  "label": "Delay entre Bots (segundos)",
                  "type": "number",
                  "min": 0,
                  "step": 1,
                  "value": 30,
                  "placeholder": "30"
                }
              ]
            },
            {
              "name": "preserve_state",
              "label": "ğŸ’¾ Preservar estado de los bots (cookies, sesiones)",
              "type": "checkbox",
              "value": true
            },
            {
              "name": "stealth_mode",
              "label": "ğŸ¥· Modo Stealth (evasiÃ³n de detecciÃ³n avanzada)",
              "type": "checkbox",
              "value": true
            },
            {
              "name": "auto_restart",
              "label": "ğŸ”„ Reiniciar automÃ¡ticamente en caso de error",
              "type": "checkbox",
              "value": true
            },
            {
              "name": "error_threshold",
              "label": "Umbral de Errores (para detener ejecuciÃ³n)",
              "type": "number",
              "min": 1,
              "max": 10,
              "value": 3,
              "placeholder": "3",
              "condition": [
                {"field": "auto_restart", "operator": "==", "value": true}
              ]
            }
          ]
        }
      ]
    }
  ],
  "statusbar": [
    {
      "name": "cancel",
      "type": "button",
      "label": "âŒ Cancelar",
      "style": "secondary",
      "onclick": "event.preventDefault(); modal.closeAll();"
    },
    {
      "name": "save",
      "type": "button",
      "label": "ğŸ’¾ Crear Familia",
      "action": "submit",
      "onclick": "event.preventDefault(); botmaster.saveFamily(this.closest('form').id);"
    }
  ]
}
