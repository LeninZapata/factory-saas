{
  "id": "task-builder",
  "title": "üìã Constructor de Tareas",
  "description": "Crea plantillas de acciones para tus bots",
  "fields": [
    {
      "name": "task_name",
      "label": "Nombre de la Plantilla",
      "type": "text",
      "required": true,
      "placeholder": "Ej: Agregar amigos en Facebook"
    },
    {
      "type": "group",
      "columns": 2,
      "gap": "normal",
      "fields": [
        {
          "name": "description",
          "label": "Descripci√≥n",
          "type": "textarea",
          "placeholder": "¬øQu√© hace esta tarea?",
          "rows": 3
        },
        {
          "name": "category",
          "label": "Categor√≠a",
          "type": "select",
          "required": true,
          "options": [
            {"value": "social", "label": "üì± Redes Sociales"},
            {"value": "email", "label": "üìß Email"},
            {"value": "scraping", "label": "üï∑Ô∏è Scraping"},
            {"value": "testing", "label": "üß™ Testing"},
            {"value": "custom", "label": "‚öôÔ∏è Personalizado"}
          ]
        }
      ]
    },
    {
      "type": "html",
      "content": "<div style='background:#e0f2fe;padding:1rem;border-radius:8px;margin:1rem 0;border-left:4px solid #0284c7;'><strong>üí° Pasos de la Tarea</strong><br>Agrega los pasos que el bot ejecutar√° en orden secuencial</div>"
    },
    {
      "name": "steps",
      "label": "üìù Pasos de Ejecuci√≥n",
      "type": "repeatable",
      "buttonPosition": "middle",
      "addText": "‚ûï Agregar Paso",
      "removeText": "üóëÔ∏è",
      "fields": [
        {
          "name": "step_type",
          "label": "‚≠ê Tipo de Paso",
          "type": "select",
          "required": true,
          "options": [
            {"value": "wait", "label": "üïê Wait - Esperar"},
            {"value": "go", "label": "üåê Go - Navegar URL"},
            {"value": "click", "label": "üñ±Ô∏è Click - Hacer clic"},
            {"value": "type", "label": "‚å®Ô∏è Type - Escribir texto"},
            {"value": "scroll", "label": "üìú Scroll - Desplazar"},
            {"value": "goToXpath", "label": "üéØ GoToXpath - Ir a elemento"},
            {"value": "mouse", "label": "üê≠ Mouse - Movimiento aleatorio"},
            {"value": "back", "label": "‚óÄÔ∏è Back - Retroceder"},
            {"value": "close", "label": "‚ùå Close - Cerrar"},
            {"value": "do", "label": "‚öôÔ∏è Do - Ejecutar funci√≥n"},
            {"value": "task", "label": "üìã Task - Ejecutar tarea"},
            {"value": "taskrand", "label": "üé≤ TaskRand - Paso aleatorio"},
            {"value": "substeps", "label": "üîÅ Substeps - Pasos anidados"}
          ]
        },
        {
          "type": "html",
          "content": "<div style='background:#dcfce7;padding:0.75rem;border-radius:6px;margin:0.5rem 0;font-size:0.9rem;'><strong>‚è±Ô∏è WAIT:</strong> Pausa la ejecuci√≥n por un tiempo determinado</div>",
          "condition": [
            {"field": "step_type", "operator": "==", "value": "wait"}
          ],
          "conditionContext": "repeatable"
        },
        {
          "name": "time",
          "label": "Tiempo",
          "type": "text",
          "placeholder": "5000 | '1 to 3 seconds' | '2 minutes' | [2000,8000]",
          "condition": [
            {"field": "step_type", "operator": "==", "value": "wait"}
          ],
          "conditionContext": "repeatable"
        },
        {
          "type": "html",
          "content": "<div style='background:#dcfce7;padding:0.75rem;border-radius:6px;margin:0.5rem 0;font-size:0.9rem;'><strong>üåê GO:</strong> Navega a una URL espec√≠fica</div>",
          "condition": [
            {"field": "step_type", "operator": "==", "value": "go"}
          ],
          "conditionContext": "repeatable"
        },
        {
          "name": "url",
          "label": "URL",
          "type": "url",
          "placeholder": "https://ejemplo.com",
          "required": true,
          "condition": [
            {"field": "step_type", "operator": "==", "value": "go"}
          ],
          "conditionContext": "repeatable"
        },
        {
          "type": "html",
          "content": "<div style='background:#dcfce7;padding:0.75rem;border-radius:6px;margin:0.5rem 0;font-size:0.9rem;'><strong>üñ±Ô∏è CLICK:</strong> Hace clic en un elemento (vac√≠o = posici√≥n actual del mouse)</div>",
          "condition": [
            {"field": "step_type", "operator": "==", "value": "click"}
          ],
          "conditionContext": "repeatable"
        },
        {
          "name": "xpath_click",
          "label": "XPath del elemento (opcional)",
          "type": "text",
          "placeholder": "//*[@id='button']",
          "condition": [
            {"field": "step_type", "operator": "==", "value": "click"}
          ],
          "conditionContext": "repeatable"
        },
        {
          "type": "html",
          "content": "<div style='background:#dcfce7;padding:0.75rem;border-radius:6px;margin:0.5rem 0;font-size:0.9rem;'><strong>‚å®Ô∏è TYPE:</strong> Escribe texto en un campo de entrada</div>",
          "condition": [
            {"field": "step_type", "operator": "==", "value": "type"}
          ],
          "conditionContext": "repeatable"
        },
        {
          "type": "group",
          "columns": 2,
          "condition": [
            {"field": "step_type", "operator": "==", "value": "type"}
          ],
          "conditionContext": "repeatable",
          "fields": [
            {
              "name": "xpath_type",
              "label": "XPath del campo",
              "type": "text",
              "placeholder": "//*[@id='username']"
            },
            {
              "name": "words",
              "label": "Texto a escribir",
              "type": "text",
              "placeholder": "Texto o keywords"
            }
          ]
        },
        {
          "type": "html",
          "content": "<div style='background:#dcfce7;padding:0.75rem;border-radius:6px;margin:0.5rem 0;font-size:0.9rem;'><strong>üìú SCROLL:</strong> Desplaza la p√°gina hacia arriba o abajo</div>",
          "condition": [
            {"field": "step_type", "operator": "==", "value": "scroll"}
          ],
          "conditionContext": "repeatable"
        },
        {
          "name": "xpath_scroll",
          "label": "XPath del elemento (opcional)",
          "type": "text",
          "placeholder": "//*[@id='content']",
          "condition": [
            {"field": "step_type", "operator": "==", "value": "scroll"}
          ],
          "conditionContext": "repeatable"
        },
        {
          "type": "html",
          "content": "<div style='background:#dcfce7;padding:0.75rem;border-radius:6px;margin:0.5rem 0;font-size:0.9rem;'><strong>üéØ GOTOXPATH:</strong> Desplaza suavemente hasta un elemento espec√≠fico</div>",
          "condition": [
            {"field": "step_type", "operator": "==", "value": "goToXpath"}
          ],
          "conditionContext": "repeatable"
        },
        {
          "type": "group",
          "columns": 2,
          "condition": [
            {"field": "step_type", "operator": "==", "value": "goToXpath"}
          ],
          "conditionContext": "repeatable",
          "fields": [
            {
              "name": "xpath_goto",
              "label": "XPath del elemento",
              "type": "text",
              "placeholder": "//*[@id='section']"
            },
            {
              "name": "speed",
              "label": "Velocidad",
              "type": "select",
              "options": [
                {"value": "slow", "label": "üê¢ Lento"},
                {"value": "medium", "label": "üêá Medio"},
                {"value": "fast", "label": "‚ö° R√°pido"},
                {"value": "random", "label": "üé≤ Aleatorio"}
              ]
            }
          ]
        },
        {
          "type": "html",
          "content": "<div style='background:#dcfce7;padding:0.75rem;border-radius:6px;margin:0.5rem 0;font-size:0.9rem;'><strong>üê≠ MOUSE:</strong> Simula movimiento humano del mouse</div>",
          "condition": [
            {"field": "step_type", "operator": "==", "value": "mouse"}
          ],
          "conditionContext": "repeatable"
        },
        {
          "type": "group",
          "columns": 2,
          "condition": [
            {"field": "step_type", "operator": "==", "value": "mouse"}
          ],
          "conditionContext": "repeatable",
          "fields": [
            {
              "name": "mouse_type",
              "label": "Tipo de movimiento",
              "type": "select",
              "options": [
                {"value": "random", "label": "üé≤ Aleatorio (defecto)"},
                {"value": "interact", "label": "ü§ù Interactuar"},
                {"value": "concern", "label": "üîç Concernido"}
              ]
            },
            {
              "name": "mouse_time",
              "label": "Duraci√≥n",
              "type": "text",
              "placeholder": "10000 | '10 to 50 seconds'",
              "value": "10000"
            }
          ]
        },
        {
          "type": "html",
          "content": "<div style='background:#dcfce7;padding:0.75rem;border-radius:6px;margin:0.5rem 0;font-size:0.9rem;'><strong>‚óÄÔ∏è BACK:</strong> Retrocede a la p√°gina anterior</div>",
          "condition": [
            {"field": "step_type", "operator": "==", "value": "back"}
          ],
          "conditionContext": "repeatable"
        },
        {
          "type": "html",
          "content": "<div style='background:#fef3c7;padding:0.75rem;border-radius:6px;margin:0.5rem 0;font-size:0.9rem;border-left:3px solid #f59e0b;'><strong>‚ÑπÔ∏è Back:</strong> No requiere par√°metros adicionales</div>",
          "condition": [
            {"field": "step_type", "operator": "==", "value": "back"}
          ],
          "conditionContext": "repeatable"
        },
        {
          "type": "html",
          "content": "<div style='background:#dcfce7;padding:0.75rem;border-radius:6px;margin:0.5rem 0;font-size:0.9rem;'><strong>‚ùå CLOSE:</strong> Cierra pesta√±a o navegador completo</div>",
          "condition": [
            {"field": "step_type", "operator": "==", "value": "close"}
          ],
          "conditionContext": "repeatable"
        },
        {
          "name": "close_type",
          "label": "Cerrar",
          "type": "select",
          "options": [
            {"value": "browser", "label": "üåê Navegador (defecto)"},
            {"value": "tab", "label": "üìë Pesta√±a actual"}
          ],
          "condition": [
            {"field": "step_type", "operator": "==", "value": "close"}
          ],
          "conditionContext": "repeatable"
        },
        {
          "type": "html",
          "content": "<div style='background:#dcfce7;padding:0.75rem;border-radius:6px;margin:0.5rem 0;font-size:0.9rem;'><strong>‚öôÔ∏è DO:</strong> Ejecuta una funci√≥n JavaScript personalizada</div>",
          "condition": [
            {"field": "step_type", "operator": "==", "value": "do"}
          ],
          "conditionContext": "repeatable"
        },
        {
          "type": "group",
          "columns": 2,
          "condition": [
            {"field": "step_type", "operator": "==", "value": "do"}
          ],
          "conditionContext": "repeatable",
          "fields": [
            {
              "name": "file",
              "label": "Archivo (sin extensi√≥n .js)",
              "type": "text",
              "placeholder": "my-file-name"
            },
            {
              "name": "function_name",
              "label": "Nombre de la funci√≥n",
              "type": "text",
              "placeholder": "name_function"
            }
          ]
        },
        {
          "type": "html",
          "content": "<div style='background:#dcfce7;padding:0.75rem;border-radius:6px;margin:0.5rem 0;font-size:0.9rem;'><strong>üìã TASK:</strong> Ejecuta otra plantilla de tarea completa</div>",
          "condition": [
            {"field": "step_type", "operator": "==", "value": "task"}
          ],
          "conditionContext": "repeatable"
        },
        {
          "name": "task_file",
          "label": "Archivo de tarea",
          "type": "text",
          "placeholder": "file-task",
          "condition": [
            {"field": "step_type", "operator": "==", "value": "task"}
          ],
          "conditionContext": "repeatable"
        },
        {
          "type": "html",
          "content": "<div style='background:#dcfce7;padding:0.75rem;border-radius:6px;margin:0.5rem 0;font-size:0.9rem;'><strong>üé≤ TASKRAND:</strong> Ejecuta UNO al azar de varios pasos posibles</div>",
          "condition": [
            {"field": "step_type", "operator": "==", "value": "taskrand"}
          ],
          "conditionContext": "repeatable"
        },
        {
          "name": "taskrand_steps",
          "label": "Pasos aleatorios (el bot elegir√° uno)",
          "type": "repeatable",
          "buttonPosition": "middle",
          "addText": "‚ûï Agregar opci√≥n",
          "removeText": "‚ùå",
          "condition": [
            {"field": "step_type", "operator": "==", "value": "taskrand"}
          ],
          "conditionContext": "repeatable",
          "fields": [
            {
              "name": "rand_step_type",
              "label": "Tipo",
              "type": "select",
              "options": [
                {"value": "go", "label": "üåê Go"},
                {"value": "click", "label": "üñ±Ô∏è Click"},
                {"value": "wait", "label": "üïê Wait"}
              ]
            },
            {
              "name": "rand_url",
              "label": "URL (si es 'go')",
              "type": "url",
              "placeholder": "https://...",
              "condition": [
                {"field": "rand_step_type", "operator": "==", "value": "go"}
              ],
              "conditionContext": "repeatable"
            },
            {
              "name": "rand_xpath",
              "label": "XPath (si es 'click')",
              "type": "text",
              "placeholder": "//*[@id='element']",
              "condition": [
                {"field": "rand_step_type", "operator": "==", "value": "click"}
              ],
              "conditionContext": "repeatable"
            },
            {
              "name": "rand_time",
              "label": "Tiempo (si es 'wait')",
              "type": "text",
              "placeholder": "5000",
              "condition": [
                {"field": "rand_step_type", "operator": "==", "value": "wait"}
              ],
              "conditionContext": "repeatable"
            }
          ]
        },
        {
          "type": "html",
          "content": "<div style='background:#dcfce7;padding:0.75rem;border-radius:6px;margin:0.5rem 0;font-size:0.9rem;'><strong>üîÅ SUBSTEPS:</strong> Agrupa m√∫ltiples pasos como subproceso</div>",
          "condition": [
            {"field": "step_type", "operator": "==", "value": "substeps"}
          ],
          "conditionContext": "repeatable"
        },
        {
          "name": "substeps",
          "label": "Pasos internos",
          "type": "repeatable",
          "buttonPosition": "middle",
          "addText": "‚ûï Agregar subpaso",
          "removeText": "‚ùå",
          "condition": [
            {"field": "step_type", "operator": "==", "value": "substeps"}
          ],
          "conditionContext": "repeatable",
          "fields": [
            {
              "name": "sub_step_type",
              "label": "Tipo",
              "type": "select",
              "options": [
                {"value": "wait", "label": "üïê Wait"},
                {"value": "go", "label": "üåê Go"},
                {"value": "click", "label": "üñ±Ô∏è Click"},
                {"value": "back", "label": "‚óÄÔ∏è Back"}
              ]
            },
            {
              "name": "sub_url",
              "label": "URL (si es 'go')",
              "type": "url",
              "condition": [
                {"field": "sub_step_type", "operator": "==", "value": "go"}
              ],
              "conditionContext": "repeatable"
            },
            {
              "name": "sub_xpath",
              "label": "XPath (si es 'click')",
              "type": "text",
              "condition": [
                {"field": "sub_step_type", "operator": "==", "value": "click"}
              ],
              "conditionContext": "repeatable"
            },
            {
              "name": "sub_time",
              "label": "Tiempo (si es 'wait')",
              "type": "text",
              "condition": [
                {"field": "sub_step_type", "operator": "==", "value": "wait"}
              ],
              "conditionContext": "repeatable"
            }
          ]
        }
      ]
    }
  ],
  "statusbar": [
    {
      "name": "preview",
      "type": "button",
      "label": "üëÅÔ∏è Previsualizar JSON",
      "onclick": "event.preventDefault(); botmaster.previewTask(this.closest('form').id);"
    },
    {
      "name": "save",
      "type": "button",
      "label": "üíæ Guardar Plantilla",
      "action": "submit",
      "onclick": "event.preventDefault(); botmaster.saveTask(this.closest('form').id);"
    }
  ]
}
