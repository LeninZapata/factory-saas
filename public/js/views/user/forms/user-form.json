{
  "id": "user-form",
  "title": "GestiÃ³n de Usuario",
  "description": "Crear o editar usuario del sistema",
  "fields": [
    {
      "type": "grouper",
      "mode": "tabs",
      "activeIndex": 0,
      "groups": [
        {
          "title": "ğŸ‘¤ Datos BÃ¡sicos",
          "fields": [
            {
              "name": "username",
              "label": "Nombre de Usuario",
              "type": "text",
              "transform": ["lowercase", "alphanumeric"],
              "validation": "required|alpha_num|min:3|max:50",
              "placeholder": "usuario123"
            },
            {
              "type": "group",
              "columns": 2,
              "gap": "normal",
              "fields": [
                {
                  "name": "email",
                  "label": "Correo ElectrÃ³nico",
                  "type": "email",
                  "transform": ["lowercase", "trim"],
                  "validation": "required|email",
                  "placeholder": "usuario@ejemplo.com"
                },
                {
                  "name": "role",
                  "label": "Rol",
                  "type": "select",
                  "validation": "required",
                  "options": [
                    { "value": "admin", "label": "ğŸ‘‘ Administrador" },
                    { "value": "editor", "label": "âœï¸ Editor" },
                    { "value": "viewer", "label": "ğŸ‘ï¸ Visualizador" },
                    { "value": "user", "label": "ğŸ‘¤ Usuario" }
                  ]
                }
              ]
            },
            {
              "type": "group",
              "columns": 2,
              "gap": "normal",
              "fields": [
                {
                  "name": "password",
                  "label": "ContraseÃ±a",
                  "type": "password",
                  "validation": "min:8",
                  "placeholder": "MÃ­nimo 8 caracteres"
                },
                {
                  "name": "password_confirm",
                  "label": "Confirmar ContraseÃ±a",
                  "type": "password",
                  "validation": "min:8",
                  "placeholder": "Repite la contraseÃ±a"
                }
              ]
            },
            {
              "type": "html",
              "content": "<div style='background: #fef3c7; padding: 0.75rem; border-radius: 4px; margin: 1rem 0; border-left: 3px solid #f59e0b; font-size: 0.875rem;'><strong>ğŸ’¡ Nota:</strong> Si estÃ¡ editando un usuario y deja la contraseÃ±a vacÃ­a, no se modificarÃ¡.</div>"
            }
          ]
        },
        {
          "title": "ğŸ” Permisos",
          "fields": [
            {
              "type": "html",
              "content": "<div style='background: #e0f2fe; padding: 0.75rem; border-radius: 4px; margin-bottom: 1rem; border-left: 3px solid #0284c7; font-size: 0.875rem;'><strong>ğŸ¯ GestiÃ³n de Permisos</strong><br>Seleccione a quÃ© plugins, menÃºs y vistas tendrÃ¡ acceso este usuario. La configuraciÃ³n se guardarÃ¡ en formato JSON.</div>"
            },
            {
              "type": "html",
              "role": "admin",
              "content": "<div id='permissions-container' style='min-height: 200px;'></div>"
            },
            {
              "type": "html",
              "content": "<div style='background: #f3f4f6; padding: 0.75rem; border-radius: 4px; margin-top: 1rem; font-size: 0.8rem; color: #6b7280;'><strong>â„¹ï¸ CÃ³mo funciona:</strong><ul style='margin: 0.5rem 0 0; padding-left: 1.5rem;'><li>âœ… <strong>Plugin habilitado:</strong> Usuario ve el plugin en el menÃº</li><li>ğŸ“‹ <strong>MenÃºs especÃ­ficos:</strong> Solo ve los menÃºs seleccionados</li><li>ğŸ‘ï¸ <strong>Vistas:</strong> Solo puede acceder a las vistas permitidas</li><li>â­ <strong>Todos:</strong> Acceso completo a todo el plugin</li></ul></div>"
            }
          ]
        },
        {
          "title": "âš™ï¸ Preferencias",
          "fields": [
            {
              "type": "group",
              "columns": 2,
              "gap": "normal",
              "fields": [
                {
                  "name": "preferences_theme",
                  "label": "Tema",
                  "type": "select",
                  "options": [
                    { "value": "light", "label": "â˜€ï¸ Claro" },
                    { "value": "dark", "label": "ğŸŒ™ Oscuro" },
                    { "value": "auto", "label": "ğŸ”„ AutomÃ¡tico" }
                  ]
                },
                {
                  "name": "preferences_language",
                  "label": "Idioma",
                  "type": "select",
                  "options": [
                    { "value": "es", "label": "ğŸ‡ªğŸ‡¸ EspaÃ±ol" },
                    { "value": "en", "label": "ğŸ‡ºğŸ‡¸ English" },
                    { "value": "pt", "label": "ğŸ‡§ğŸ‡· PortuguÃªs" }
                  ]
                }
              ]
            },
            {
              "name": "preferences_notifications",
              "label": "Habilitar notificaciones del sistema",
              "type": "checkbox"
            },
            {
              "type": "html",
              "content": "<div style='background: #dcfce7; padding: 0.75rem; border-radius: 4px; margin-top: 1rem; border-left: 3px solid #16a34a; font-size: 0.875rem;'><strong>ğŸ’¾ Almacenamiento:</strong> Todas estas preferencias se guardan en el campo <code>config</code> como JSON string.</div>"
            }
          ]
        },
        {
          "title": "ğŸ“Š JSON Preview",
          "fields": [
            {
              "type": "html",
              "content": "<div style='background: #f9fafb; padding: 1rem; border-radius: 4px; margin-bottom: 1rem;'><strong>ğŸ” Vista Previa del JSON</strong><br><small style='color: #6b7280;'>Este es el contenido que se guardarÃ¡ en el campo <code>config</code></small></div>"
            },
            {
              "type": "html",
              "content": "<pre id='config-preview' style='background: #1f2937; color: #f3f4f6; padding: 1rem; border-radius: 4px; font-size: 0.8rem; overflow-x: auto; max-height: 400px;'>{}</pre>"
            },
            {
              "type": "html",
              "content": "<div style='background: #f9fafb; padding: 0.75rem; border-radius: 4px; margin-top: 1rem; font-size: 0.8rem; color: #6b7280;'><strong>â„¹ï¸ Nota:</strong> El preview JSON se actualiza automÃ¡ticamente al guardar el usuario.</div>"
            }
          ]
        }
      ]
    }
  ],
  "statusbar": [
    {
      "name": "submit",
      "type": "button",
      "label": "ğŸ’¾ Guardar Usuario",
      "action": "submit",
      "onclick": "event.preventDefault(); admin.save(this.closest('form').id);"
    },
    {
      "name": "cancel",
      "type": "button",
      "label": "âŒ Cancelar",
      "style": "secondary",
      "onclick": "event.preventDefault(); modal.closeAll();"
    }
  ]
}